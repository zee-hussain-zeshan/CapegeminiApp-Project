<p id="notice"><%= notice %></p>

<!--SHOW STUDENTS BY MODULE FORM -->
<% if !@modules.blank? %>
			<% if @userChoice == "module" %>
				<p>Please choose a module</p>
				<%= form_tag("showStudentsByModule") do %>
				 <table align="center">
				    <tr>
				      <th>Module</th>
				    </tr>
				     <tr>
				    <td><%= collection_select :collection, :id, @modules, :id,:module_name %></td>
				   </tr>
				   </table>
				   <%= hidden_field_tag :id, "module" %>
				  <%= submit_tag "View Students" %>
				<% end %>

			<% elsif @userChoice == "session" %>
				<% @moduleChosen = params[:moduleChosen]
					if @moduleChosen == "false" || @moduleChosen.blank?
				%>
					<p>Please choose a module</p>
					
					<%= form_tag("#") do %>
					 <table align="center">
					    <tr>
					      <th>Module</th>
					    </tr>
					     <tr>
					    <td><%= collection_select :module, :id, Course.all, :id,:module_name %></td>
					   </tr>
					   </table>
					   <%= hidden_field_tag :moduleChosen, "true" %>
					  <%= submit_tag "Next" %>
					<% end %>
					<% end %>	
				<% if @moduleChosen == "true" %>
					<% @module = params[:module][:id]
					   @sessions = Session.where(module_id: @module)
					%>
					<p>Please choose a session</p>

					<%= form_tag("showStudentsByModule") do %>
					 <table align="center">
					    <tr>
					      <th>Session</th>
					    </tr>
					     <tr>
					    <td><%= collection_select :collection, :id, @sessions, :id,:date %></td>
					   </tr>
					   </table>
					   <%= hidden_field_tag :id, "session" %>
					  <%= submit_tag "View Students" %>
					<% end %>
				<% end %>

			<% elsif @userChoice == "attendance" %>
			    <h4>Pick a session - Click on the date</h4>
			    <% @sessions = Session.all %>
			    <table align="center">
			      <thead>
			        <tr>
			          <th>Date</th>
			          <th>Module</th>
			          <th colspan="3"></th>
			        </tr>
			      </thead>

			      <tbody>
			        <% @sessions.each do |session| %>
			          <tr>
			            <td><%= link_to session.date, {:controller => 'pages', :action => 'session', :id => session.id} %></td>
			            <td><%= session.module_id %></td>
			            <td><%= link_to 'Show', session %></td>
			            <td><%= link_to 'Edit', edit_session_path(session) %></td>
			            <td><%= link_to 'Destroy', session, method: :delete, data: { confirm: 'Are you sure?' } %></td>
			          </tr>
			        <% end %>
			      </tbody>
			    </table>
			<% end %>
<% else %>
			<p> There are no modules on the database </p>
<% end %>






